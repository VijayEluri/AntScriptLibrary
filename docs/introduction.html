<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Ant Script Library - Introduction</title>
    <link rel="stylesheet" type="text/css" href="styles/asl.css"/>
    <link href="ant-logo.ico" type="image/x-icon" rel="shortcut icon"/>
</head>
<body>
<div id="wrap">
<div id="header">
    <p class="antlogo"><img src="ant-logo.gif"/></p>
    <h1>Ant Script Library - Introduction</h1>
</div>
<div id="content">
    <h2>Introduction to the Ant Script Library</h2>

    <h3>Overview</h3>
    
    <h4>The Problem</h4>
    
    <p>Build scripts are often added to a project as an afterthought. Sometimes
    they are written from scratch, or more often they are copied from another
    similar project, and adapted for the new project, leading to similar but
    inconsistent builds across projects. There is duplication and unneeded
    complexity. The build scripts are not maintained with same engineering
    rigour as production code.</p>
    
    <p>Developers who are new to Ant don't have the skills or knowledge to be
    able to create a robust and maintainable build.</p>
    
    <h4>The Solution</h4>
    
    <p>The solution is reuse. When Ant 1.6.0 was released in 2003, it introduced
    a new task: <code>&lt;import&gt;</code>, which was specifically designed to
    allow reusing external script definitions. These bring consistency and robustness
    for project builds, and allows experts in Ant scripts to share their expertise
    widely</p>
    
    <p>The Ant Script Library is a collection of reusable build targets that
    can be imported into project builds. These scripts provide:</p>
    
    <ul>
        <li>ready to use builds for standard build types, such as building jars,
        web applications, and so on</li>
        <li>a well designed set of robust and consistent targets</li>
        <li>conventions and guidelines, without limiting the ability to adapt the
        build to each project, group or organisation</li>
    </ul>
    
    <h3>Example Project</h3>
    
    <p>For the purposes of this example, suppose you are developing an incredible
    <acronym title="Aritficial Intelligence">AI</acronym> project called Deep
    Thought. You've been developing the code in an
    <acronym title="Integrated Development Environment">IDE</acronym>, but are
    now looking to automate the build. Enter the Ant Script Library.</p>
    
    <p>The project structure currently looks like this:</p>
    
    <pre>
DeepThought/
 +-src/
   +-example/
     +-DeepThough.java</pre>
    
    <h4>Install the Ant Script Library</h4>
    
    <p>The first thing to do is grab a copy of the Ant Script Library, which
    can be retrieved from <a href="http://www.exubero.com/asl/download.html">http://www.exubero.com/asl/download.html</a>.
    Download and unzip the file into a subdirectory of your project.</p>
    
    <h4>Build the Code</h4>
    
    <p>Create a new file called <code>build.xml</code> in the top level directory
    of the project, with the following contents:</p>
    
    <pre><code><b>&lt;project</b><span style='color: #008000'> name=</span><span style='color: #aa0000'>"DeepThought"</span><span style='color: #008000'> default=</span><span style='color: #aa0000'>"dist"</span><b>&gt;</b>
    <b>&lt;property</b><span style='color: #008000'> name=</span><span style='color: #aa0000'>"java-build.src-dir"</span><span style='color: #008000'> location=</span><span style='color: #aa0000'>"src"</span><b>/&gt;</b>
    <b>&lt;import</b><span style='color: #008000'> file=</span><span style='color: #aa0000'>"ant-script-library/asl-java-build.xml"</span><b>/&gt;</b>
<b>&lt;/project&gt;</b></code></pre>
    
    <p>Because the directory containing the source code is not exactly as
    expected by the Ant Script Library, we have to override the
    default location by setting the property <code>java-build.src-dir</code>
    before importing the Java build module from the Ant Script Library.</p>
    
    <p>With only four lines of Ant build, what can our script do? Looking at
    the project help is a good first place to look:</p>
    
    <pre>%ant -p
Buildfile: build.xml

Main targets:

 clean           Deletes files generated by the build
 compile         Compiles the java source
 copy-resources  Copies resources in preparation to be packaged in jar
 dist            Create a distributable for this java project
 generate        Generates source code
 jar             Create a jar for this java project
Default target: dist</pre>

    <p>Not bad! We can compile the code, and package the compiled code into a
    jar file. The default <code>dist</code> target does all this:</p>
    
    <pre>%ant dist
Buildfile: build.xml

generate:

-init-classpath:

compile:
    [mkdir] Created dir: /workspace/deepthought/target/classes
    [javac] Compiling 1 source file to /workspace/deepthought/target/classes

copy-resources:

-init-time:

-init-jar-classpath:

jar:
    [mkdir] Created dir: /workspace/deepthought/target/dist
      [jar] Building jar: /workspace/deepthought/target/dist/DeepThought.jar

dist:

BUILD SUCCESSFUL
Total time: 1 second</pre>
    
    <h4>Test the Code</h4>
    
    <p>TBD: extend the build by importing asl-java-test.xml</p>
    
    <h4>Create Reports</h4>

    <p>TBD: extend the build by importing asl-java-report.xml</p>

    <hr/>

    <p>Is there a problem or mistake on this page? Do you want to contribute
    some changes? Send me an email at
    &#106;&#111;&#101;&#64;&#101;&#120;&#117;&#98;&#101;&#114;&#111;&#46;&#99;&#111;&#109;.</p>

</div>
<ul id="nav">
    <li><a href="index.html">Overview</a></li>
    <li><a href="usage.html">Usage</a></li>
    <li><a href="download.html">Download</a></li>
    <li class="navselected">Introduction</li>
    <li><a href="design.html">Design Principles</a></li>
    <li><a href="targets.html">Targets</a></li>
    <li><a href="reference.html">Reference</a></li>
</ul>
<div id="sidebar">
    <h3>Other Ant Resources</h3>
    <ul>
        <li><a href="http://ant.apache.org/">Apache Ant Home</a></li>
        <li><a href="http://ant.apache.org/manual/index.html">Apache Ant Manual</a></li>
        <li><a href="http://www.exubero.com/ant/antintro-s5.html">Introduction to Ant</a></li>
    </ul>
</div>
<div id="footer">
    <p class="updated">Last update: $Date$</p>
    <p class="copyright">Copyright &copy; 2009 <a href="http://www.exubero.com/joe/">Joe Schmetzer</a></p>
    <p class="license">Software is Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a></p>
</div>
</div>
</body>
</html>
